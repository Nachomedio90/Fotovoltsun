<div>
  <h1>Cálculo de Generación de Energía Fotovoltaica</h1>
  <p>
    Utilice este calculador para determinar el potencial de generación de energía fotovoltaica basado en los datos estadísticos de heliophany de su ubicación geográfica exacta.
  </p>
  <form>
    <div id="map" style="height: 400px; width: 100%;"></div>
    <input type="hidden" id="latitude" name="latitude" required />
    <input type="hidden" id="longitude" name="longitude" required />
    <input type="text" name="surface" placeholder="Ingrese la superficie disponible (m²)..." required />
    <button type="submit">Calcular</button>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/build/ol.js"></script>
<script>
  const form = document.querySelector("form");
  const latitudeInput = form.querySelector("#latitude");
  const longitudeInput = form.querySelector("#longitude");

  var map = new ol.Map({
    target: 'map',
    layers: [
      new ol.layer.Tile({
        source: new ol.source.OSM()
      })
    ],
    view: new ol.View({
      center: [0, 0],
      zoom: 2
    })
  });

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    const latitude = form.querySelector("#latitude").value;
    const longitude = form.querySelector("#longitude").value;
    const surface = form.querySelector("input[name=surface]").value;

    fetch("/calculate-photovoltaic-energy-generation", {
      method: "POST",
      body: JSON.stringify({ latitude, longitude, surface }),
    }).then((response) => {
      response.json().then((data) => {
        // Handle data here
        // Link the response to a web repository, such as Github.
        window.open(
          "https://github.com/your_username/calculate-photovoltaic-energy-generation"
        );
      });
    });
  });
</script>
