<div>
  <h1>Cálculo de Generación de Energía Fotovoltaica</h1>
  <p>
    Utilice este calculador para determinar el potencial de generación de energía fotovoltaica basado en los datos estadísticos de heliophany de su ubicación geográfica exacta.
  </p>
  <form>
    <div id="map" style="height: 400px; width: 100%;"></div>
    <input type="hidden" id="latitude" name="latitude" required />
    <input type="hidden" id="longitude" name="longitude" required />
    <input type="text" name="surface" placeholder="Ingrese la superficie disponible (m²)..." required />
    <button type="submit">Calcular</button>
  </form>
</div>
<script>
  const form = document.querySelector("form");
  const latitudeInput = form.querySelector("#latitude");
  const longitudeInput = form.querySelector("#longitude");

  const map = L.map('map').setView([-34.397, 150.644], 8);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  const marker = L.marker([-34.397, 150.644], {
      draggable: true
  }).addTo(map);

  marker.on("dragend", function (event) {
      latitudeInput.value = event.target._latlng.lat;
      longitudeInput.value = event.target._latlng.lng;
  });

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    const latitude = form.querySelector("#latitude").value;
    const longitude = form.querySelector("#longitude").value;
    const surface = form.querySelector("input[name=surface]").value;

    fetch("/calculate-photovoltaic-energy-generation", {
      method: "POST",
      body: JSON.stringify({ latitude, longitude, surface }),
    }).then((response) => {
      response.json().then((data) => {
        // Handle data here
        // Link the response to a web repository, such as Github.
        window.open(
          "https://github.com/your_username/calculate-photovoltaic-energy-generation"
        );
      });
    });
  });
</script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZ
